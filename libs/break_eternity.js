!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).Decimal=r()}(this,function(){"use strict";var t=Math.log10(9e15),r=function(){for(var t=[],r=-323;r<=308;r++)t.push(Number("1e"+r));return function(r){return t[r+323]}}(),i=function(t){return u.fromValue_noAlloc(t)},e=function(t,r,i){return u.fromComponents(t,r,i)},n=function(t,r,i){return u.fromComponents_noNormalize(t,r,i)},a=function(t,r){var i=r+1,e=Math.ceil(Math.log10(Math.abs(t))),n=Math.round(t*Math.pow(10,i-e))*Math.pow(10,e-i);return parseFloat(n.toFixed(Math.max(i-e,0)))},s=function(t){return Math.sign(t)*Math.log10(Math.abs(t))},o=.5671432904097838,h=function(t,r=1e-10){var i,e;if(!Number.isFinite(t))return t;if(0===t)return t;if(1===t)return o;i=t<10?0:Math.log(t)-Math.log(Math.log(t));for(var n=0;n<100;++n){if(e=(t*Math.exp(-i)+i*i)/(i+1),Math.abs(e-i)<r*Math.abs(e))return e;i=e}throw Error("Iteration failed to converge: "+t)},u=function(){function u(t){this.sign=Number.NaN,this.layer=Number.NaN,this.mag=Number.NaN,t instanceof u?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0)}Object.defineProperty(u.prototype,"m",{get:function(){if(0===this.sign)return 0;if(0===this.layer){var t,i=Math.floor(Math.log10(this.mag));return t=5e-324===this.mag?5:this.mag/r(i),this.sign*t}if(1===this.layer){var e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}return this.sign},set:function(t){this.layer<=2?this.fromMantissaExponent(t,this.e):(this.sign=Math.sign(t),0===this.sign&&(this.layer,this.exponent))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"e",{get:function(){return 0===this.sign?0:0===this.layer?Math.floor(Math.log10(this.mag)):1===this.layer?Math.floor(this.mag):2===this.layer?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(t){this.fromMantissaExponent(this.m,t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"s",{get:function(){return this.sign},set:function(t){0===t?(this.sign=0,this.layer=0,this.mag=0):this.sign=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mantissa",{get:function(){return this.m},set:function(t){this.m=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"exponent",{get:function(){return this.e},set:function(t){this.e=t},enumerable:!0,configurable:!0}),u.fromComponents=function(t,r,i){return(new u).fromComponents(t,r,i)},u.fromComponents_noNormalize=function(t,r,i){return(new u).fromComponents_noNormalize(t,r,i)},u.fromMantissaExponent=function(t,r){return(new u).fromMantissaExponent(t,r)},u.fromMantissaExponent_noNormalize=function(t,r){return(new u).fromMantissaExponent_noNormalize(t,r)},u.fromDecimal=function(t){return(new u).fromDecimal(t)},u.fromNumber=function(t){return(new u).fromNumber(t)},u.fromString=function(t){return(new u).fromString(t)},u.fromValue=function(t){return(new u).fromValue(t)},u.fromValue_noAlloc=function(t){return t instanceof u?t:new u(t)},u.abs=function(t){return i(t).abs()},u.neg=function(t){return i(t).neg()},u.negate=function(t){return i(t).neg()},u.negated=function(t){return i(t).neg()},u.sign=function(t){return i(t).sign()},u.sgn=function(t){return i(t).sign()},u.round=function(t){return i(t).round()},u.floor=function(t){return i(t).floor()},u.ceil=function(t){return i(t).ceil()},u.trunc=function(t){return i(t).trunc()},u.add=function(t,r){return i(t).add(r)},u.plus=function(t,r){return i(t).add(r)},u.sub=function(t,r){return i(t).sub(r)},u.subtract=function(t,r){return i(t).sub(r)},u.minus=function(t,r){return i(t).sub(r)},u.mul=function(t,r){return i(t).mul(r)},u.multiply=function(t,r){return i(t).mul(r)},u.times=function(t,r){return i(t).mul(r)},u.div=function(t,r){return i(t).div(r)},u.divide=function(t,r){return i(t).div(r)},u.recip=function(t){return i(t).recip()},u.reciprocal=function(t){return i(t).recip()},u.reciprocate=function(t){return i(t).reciprocate()},u.cmp=function(t,r){return i(t).cmp(r)},u.cmpabs=function(t,r){return i(t).cmpabs(r)},u.compare=function(t,r){return i(t).cmp(r)},u.eq=function(t,r){return i(t).eq(r)},u.equals=function(t,r){return i(t).eq(r)},u.neq=function(t,r){return i(t).neq(r)},u.notEquals=function(t,r){return i(t).notEquals(r)},u.lt=function(t,r){return i(t).lt(r)},u.lte=function(t,r){return i(t).lte(r)},u.gt=function(t,r){return i(t).gt(r)},u.gte=function(t,r){return i(t).gte(r)},u.max=function(t,r){return i(t).max(r)},u.min=function(t,r){return i(t).min(r)},u.minabs=function(t,r){return i(t).minabs(r)},u.maxabs=function(t,r){return i(t).maxabs(r)},u.clamp=function(t,r,e){return i(t).clamp(r,e)},u.clampMin=function(t,r){return i(t).clampMin(r)},u.clampMax=function(t,r){return i(t).clampMax(r)},u.cmp_tolerance=function(t,r,e){return i(t).cmp_tolerance(r,e)},u.compare_tolerance=function(t,r,e){return i(t).cmp_tolerance(r,e)},u.eq_tolerance=function(t,r,e){return i(t).eq_tolerance(r,e)},u.equals_tolerance=function(t,r,e){return i(t).eq_tolerance(r,e)},u.neq_tolerance=function(t,r,e){return i(t).neq_tolerance(r,e)},u.notEquals_tolerance=function(t,r,e){return i(t).notEquals_tolerance(r,e)},u.lt_tolerance=function(t,r,e){return i(t).lt_tolerance(r,e)},u.lte_tolerance=function(t,r,e){return i(t).lte_tolerance(r,e)},u.gt_tolerance=function(t,r,e){return i(t).gt_tolerance(r,e)},u.gte_tolerance=function(t,r,e){return i(t).gte_tolerance(r,e)},u.pLog10=function(t){return i(t).pLog10()},u.absLog10=function(t){return i(t).absLog10()},u.log10=function(t){return i(t).log10()},u.log=function(t,r){return i(t).log(r)},u.log2=function(t){return i(t).log2()},u.ln=function(t){return i(t).ln()},u.logarithm=function(t,r){return i(t).logarithm(r)},u.pow=function(t,r){return i(t).pow(r)},u.pow10=function(t){return i(t).pow10()},u.root=function(t,r){return i(t).root(r)},u.factorial=function(t,r){return i(t).factorial()},u.gamma=function(t,r){return i(t).gamma()},u.lngamma=function(t,r){return i(t).lngamma()},u.exp=function(t){return i(t).exp()},u.sqr=function(t){return i(t).sqr()},u.sqrt=function(t){return i(t).sqrt()},u.cube=function(t){return i(t).cube()},u.cbrt=function(t){return i(t).cbrt()},u.tetrate=function(t,r=2,e=n(1,0,1)){return i(t).tetrate(r,e)},u.iteratedexp=function(t,r=2,e=n(1,0,1)){return i(t).iteratedexp(r,e)},u.iteratedlog=function(t,r=10,e=1){return i(t).iteratedlog(r,e)},u.layeradd10=function(t,r){return i(t).layeradd10(r)},u.layeradd=function(t,r,e=10){return i(t).layeradd(r,e)},u.slog=function(t,r=10){return i(t).slog(r)},u.lambertw=function(t){return i(t).lambertw()},u.ssqrt=function(t){return i(t).ssqrt()},u.pentate=function(t,r=2,e=n(1,0,1)){return i(t).pentate(r,e)},u.affordGeometricSeries=function(t,r,e,n){return this.affordGeometricSeries_core(i(t),i(r),i(e),n)},u.sumGeometricSeries=function(t,r,e,n){return this.sumGeometricSeries_core(t,i(r),i(e),n)},u.affordArithmeticSeries=function(t,r,e,n){return this.affordArithmeticSeries_core(i(t),i(r),i(e),i(n))},u.sumArithmeticSeries=function(t,r,e,n){return this.sumArithmeticSeries_core(i(t),i(r),i(e),i(n))},u.efficiencyOfPurchase=function(t,r,e){return this.efficiencyOfPurchase_core(i(t),i(r),i(e))},u.randomDecimalForTesting=function(t){if(20*Math.random()<1)return n(0,0,0);var r=Math.random()>.5?1:-1;if(20*Math.random()<1)return n(r,0,1);var i=Math.floor(Math.random()*(t+1)),a=0===i?616*Math.random()-308:16*Math.random();Math.random()>.9&&(a=Math.trunc(a));var s=Math.pow(10,a);return Math.random()>.9&&(s=Math.trunc(s)),e(r,i,s)},u.affordGeometricSeries_core=function(t,r,i,e){var n=r.mul(i.pow(e));return u.floor(t.div(n).mul(i.sub(1)).add(1).log10().div(i.log10()))},u.sumGeometricSeries_core=function(t,r,i,e){return r.mul(i.pow(e)).mul(u.sub(1,i.pow(t))).div(u.sub(1,i))},u.affordArithmeticSeries_core=function(t,r,i,e){var n=r.add(e.mul(i)).sub(i.div(2)),a=n.pow(2);return n.neg().add(a.add(i.mul(t).mul(2)).sqrt()).div(i).floor()},u.sumArithmeticSeries_core=function(t,r,i,e){var n=r.add(e.mul(i));return t.div(2).mul(n.mul(2).plus(t.sub(1).mul(i)))},u.efficiencyOfPurchase_core=function(t,r,i){return t.div(r).add(t.div(i))},u.prototype.normalize=function(){if(0===this.sign||0===this.mag&&0===this.layer)return this.sign=0,this.mag=0,this.layer=0,this;if(0===this.layer&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),0===this.layer&&this.mag<11111111111111112e-32)return this.layer+=1,this.mag=Math.log10(this.mag),this;var r=Math.abs(this.mag),i=Math.sign(this.mag);if(r>=9e15)return this.layer+=1,this.mag=i*Math.log10(r),this;for(;r<t&&this.layer>0;)this.layer-=1,0===this.layer?this.mag=Math.pow(10,this.mag):(this.mag=i*Math.pow(10,r),r=Math.abs(this.mag),i=Math.sign(this.mag));return 0===this.layer&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):0===this.mag&&(this.sign=0)),this},u.prototype.fromComponents=function(t,r,i){return this.sign=t,this.layer=r,this.mag=i,this.normalize(),this},u.prototype.fromComponents_noNormalize=function(t,r,i){return this.sign=t,this.layer=r,this.mag=i,this},u.prototype.fromMantissaExponent=function(t,r){return this.layer=1,this.sign=Math.sign(t),t=Math.abs(t),this.mag=r+Math.log10(t),this.normalize(),this},u.prototype.fromMantissaExponent_noNormalize=function(t,r){return this.fromMantissaExponent(t,r),this},u.prototype.fromDecimal=function(t){return this.sign=t.sign,this.layer=t.layer,this.mag=t.mag,this},u.prototype.fromNumber=function(t){return this.mag=Math.abs(t),this.sign=Math.sign(t),this.layer=0,this.normalize(),this};u.prototype.fromString=function(t){var r=(t=t.replace(",","")).split("^^^");if(2===r.length){var n=parseFloat(r[0]),a=parseFloat(r[1]),o=1;if(2===(l=r[1].split(";")).length){o=parseFloat(l[1]);isFinite(o)||(o=1)}if(isFinite(n)&&isFinite(a)){var h=u.pentate(n,a,o);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}var g=t.split("^^");if(2===g.length){var l;n=parseFloat(g[0]),a=parseFloat(g[1]);if(2===(l=g[1].split(";")).length){o=parseFloat(l[1]);isFinite(o)||(o=1)}if(isFinite(n)&&isFinite(a)){h=u.tetrate(n,a,o);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}var m,f=t.split("^");if(2===f.length){n=parseFloat(f[0]);var c=parseFloat(f[1]);if(isFinite(n)&&isFinite(c)){h=u.pow(n,c);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}if(2===(m=(t=t.trim().toLowerCase()).split("pt")).length){n=10,a=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");o=parseFloat(m[1]);if(isFinite(o)||(o=1),isFinite(n)&&isFinite(a)){h=u.tetrate(n,a,o);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}if(2===(m=t.split("p")).length){n=10,a=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");o=parseFloat(m[1]);if(isFinite(o)||(o=1),isFinite(n)&&isFinite(a)){h=u.tetrate(n,a,o);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}var p=t.split("e"),y=p.length-1;if(0===y){var d=parseFloat(t);if(isFinite(d))return this.fromNumber(d)}else if(1===y){d=parseFloat(t);if(isFinite(d)&&0!==d)return this.fromNumber(d)}var M=t.split("e^");if(2===M.length){this.sign=1,"-"==M[0].charAt(0)&&(this.sign=-1);for(var b="",N=0;N<M[1].length;++N){var v=M[1].charCodeAt(N);if(!(v>=43&&v<=57||101===v))return this.layer=parseFloat(b),this.mag=parseFloat(M[1].substr(N+1)),this.normalize(),this;b+=M[1].charAt(N)}}if(y<1)return this.sign=0,this.layer=0,this.mag=0,this;var F=parseFloat(p[0]);if(0===F)return this.sign=0,this.layer=0,this.mag=0,this;c=parseFloat(p[p.length-1]);if(y>=2){var _=parseFloat(p[p.length-2]);isFinite(_)&&(c*=Math.sign(_),c+=s(_))}if(isFinite(F))if(1===y)this.sign=Math.sign(F),this.layer=1,this.mag=c+Math.log10(Math.abs(F));else{if(this.sign=Math.sign(F),this.layer=y,2===y){h=u.mul(e(1,2,c),i(F));return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}this.mag=c}else this.sign="-"===p[0]?-1:1,this.layer=y,this.mag=c;return this.normalize(),this},u.prototype.fromValue=function(t){return t instanceof u?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0,this)},u.prototype.toNumber=function(){return Number.isFinite(this.layer)?0===this.layer?this.sign*this.mag:1===this.layer?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN},u.prototype.mantissaWithDecimalPlaces=function(t){return isNaN(this.m)?Number.NaN:0===this.m?0:a(this.m,t)},u.prototype.magnitudeWithDecimalPlaces=function(t){return isNaN(this.mag)?Number.NaN:0===this.mag?0:a(this.mag,t)},u.prototype.toString=function(){return 0===this.layer?this.mag<1e21&&this.mag>1e-7||0===this.mag?(this.sign*this.mag).toString():this.m+"e"+this.e:1===this.layer?this.m+"e"+this.e:this.layer<=5?(-1===this.sign?"-":"")+"e".repeat(this.layer)+this.mag:(-1===this.sign?"-":"")+"(e^"+this.layer+")"+this.mag},u.prototype.toExponential=function(t){return 0===this.layer?(this.sign*this.mag).toExponential(t):this.toStringWithDecimalPlaces(t)},u.prototype.toFixed=function(t){return 0===this.layer?(this.sign*this.mag).toFixed(t):this.toStringWithDecimalPlaces(t)},u.prototype.toPrecision=function(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.exponent-1):this.toExponential(t-1)},u.prototype.valueOf=function(){return this.toString()},u.prototype.toJSON=function(){return this.toString()},u.prototype.toStringWithDecimalPlaces=function(t){return 0===this.layer?this.mag<1e21&&this.mag>1e-7||0===this.mag?(this.sign*this.mag).toFixed(t):a(this.m,t)+"e"+a(this.e,t):1===this.layer?a(this.m,t)+"e"+a(this.e,t):this.layer<=5?(-1===this.sign?"-":"")+"e".repeat(this.layer)+a(this.mag,t):(-1===this.sign?"-":"")+"(e^"+this.layer+")"+a(this.mag,t)},u.prototype.abs=function(){return n(0===this.sign?0:1,this.layer,this.mag)},u.prototype.neg=function(){return n(-this.sign,this.layer,this.mag)},u.prototype.negate=function(){return this.neg()},u.prototype.negated=function(){return this.neg()},u.prototype.sign=function(){return this.sign},u.prototype.sgn=function(){return this.sign},u.prototype.round=function(){return this.mag<0?u.dZero:0===this.layer?e(this.sign,0,Math.round(this.mag)):this},u.prototype.floor=function(){return this.mag<0?u.dZero:0===this.layer?e(this.sign,0,Math.floor(this.mag)):this},u.prototype.ceil=function(){return this.mag<0?u.dZero:0===this.layer?e(this.sign,0,Math.ceil(this.mag)):this},u.prototype.trunc=function(){return this.mag<0?u.dZero:0===this.layer?e(this.sign,0,Math.trunc(this.mag)):this},u.prototype.add=function(t){var r,a,s=i(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(s.layer))return s;if(0===this.sign)return s;if(0===s.sign)return this;if(this.sign===-s.sign&&this.layer===s.layer&&this.mag===s.mag)return n(0,0,0);if(this.layer>=2||s.layer>=2)return this.maxabs(s);if(u.cmpabs(this,s)>0?(r=this,a=s):(r=s,a=this),0===r.layer&&0===a.layer)return i(r.sign*r.mag+a.sign*a.mag);var o=r.layer*Math.sign(r.mag),h=a.layer*Math.sign(a.mag);if(o-h>=2)return r;if(0===o&&-1===h){if(Math.abs(a.mag-Math.log10(r.mag))>17)return r;var g=Math.pow(10,Math.log10(r.mag)-a.mag),l=a.sign+r.sign*g;return e(Math.sign(l),1,a.mag+Math.log10(Math.abs(l)))}if(1===o&&0===h){if(Math.abs(r.mag-Math.log10(a.mag))>17)return r;g=Math.pow(10,r.mag-Math.log10(a.mag)),l=a.sign+r.sign*g;return e(Math.sign(l),1,Math.log10(a.mag)+Math.log10(Math.abs(l)))}if(Math.abs(r.mag-a.mag)>17)return r;g=Math.pow(10,r.mag-a.mag),l=a.sign+r.sign*g;return e(Math.sign(l),1,a.mag+Math.log10(Math.abs(l)))},u.prototype.plus=function(t){return this.add(t)},u.prototype.sub=function(t){return this.add(i(t).neg())},u.prototype.subtract=function(t){return this.sub(t)},u.prototype.minus=function(t){return this.sub(t)},u.prototype.mul=function(t){var r,a,s=i(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(s.layer))return s;if(0===this.sign||0===s.sign)return n(0,0,0);if(this.layer===s.layer&&this.mag===-s.mag)return n(this.sign*s.sign,0,1);if(this.layer>s.layer||this.layer==s.layer&&Math.abs(this.mag)>Math.abs(s.mag)?(r=this,a=s):(r=s,a=this),0===r.layer&&0===a.layer)return i(r.sign*a.sign*r.mag*a.mag);if(r.layer>=3||r.layer-a.layer>=2)return e(r.sign*a.sign,r.layer,r.mag);if(1===r.layer&&0===a.layer)return e(r.sign*a.sign,1,r.mag+Math.log10(a.mag));if(1===r.layer&&1===a.layer)return e(r.sign*a.sign,1,r.mag+a.mag);if(2===r.layer&&1===a.layer){var o=e(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(e(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return e(r.sign*a.sign,o.layer+1,o.sign*o.mag)}if(2===r.layer&&2===a.layer){o=e(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(e(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return e(r.sign*a.sign,o.layer+1,o.sign*o.mag)}throw Error("Bad arguments to mul: "+this+", "+t)},u.prototype.multiply=function(t){return this.mul(t)},u.prototype.times=function(t){return this.mul(t)},u.prototype.div=function(t){var r=i(t);return this.mul(r.recip())},u.prototype.divide=function(t){return this.div(t)},u.prototype.divideBy=function(t){return this.div(t)},u.prototype.dividedBy=function(t){return this.div(t)},u.prototype.recip=function(){return 0===this.mag?u.dNaN:0===this.layer?e(this.sign,0,1/this.mag):e(this.sign,this.layer,-this.mag)},u.prototype.reciprocal=function(){return this.recip()},u.prototype.reciprocate=function(){return this.recip()},u.prototype.cmp=function(t){var r=i(t);return this.sign>r.sign?1:this.sign<r.sign?-1:this.sign*this.cmpabs(t)},u.prototype.cmpabs=function(t){var r=i(t),e=this.mag>0?this.layer:-this.layer,n=r.mag>0?r.layer:-r.layer;return e>n?1:e<n?-1:this.mag>r.mag?1:this.mag<r.mag?-1:0},u.prototype.compare=function(t){return this.cmp(t)},u.prototype.eq=function(t){var r=i(t);return this.sign===r.sign&&this.layer===r.layer&&this.mag===r.mag},u.prototype.equals=function(t){return this.eq(t)},u.prototype.neq=function(t){return!this.eq(t)},u.prototype.notEquals=function(t){return this.neq(t)},u.prototype.lt=function(t){i(t);return-1===this.cmp(t)},u.prototype.lte=function(t){return!this.gt(t)},u.prototype.gt=function(t){i(t);return 1===this.cmp(t)},u.prototype.gte=function(t){return!this.lt(t)},u.prototype.max=function(t){var r=i(t);return this.lt(r)?r:this},u.prototype.min=function(t){var r=i(t);return this.gt(r)?r:this},u.prototype.maxabs=function(t){var r=i(t);return this.cmpabs(r)<0?r:this},u.prototype.minabs=function(t){var r=i(t);return this.cmpabs(r)>0?r:this},u.prototype.clamp=function(t,r){return this.max(t).min(r)},u.prototype.clampMin=function(t){return this.max(t)},u.prototype.clampMax=function(t){return this.min(t)},u.prototype.cmp_tolerance=function(t,r){var e=i(t);return this.eq_tolerance(e,r)?0:this.cmp(e)},u.prototype.compare_tolerance=function(t,r){return this.cmp_tolerance(t,r)},u.prototype.eq_tolerance=function(t,r){var e=i(t);if(null==r&&(r=1e-7),this.sign!==e.sign)return!1;if(Math.abs(this.layer-e.layer)>1)return!1;var n=this.mag,a=e.mag;return this.layer>e.layer&&(a=s(a)),this.layer<e.layer&&(n=s(n)),Math.abs(n-a)<=r*Math.max(Math.abs(n),Math.abs(a))},u.prototype.equals_tolerance=function(t,r){return this.eq_tolerance(t,r)},u.prototype.neq_tolerance=function(t,r){return!this.eq_tolerance(t,r)},u.prototype.notEquals_tolerance=function(t,r){return this.neq_tolerance(t,r)},u.prototype.lt_tolerance=function(t,r){var e=i(t);return!this.eq_tolerance(e,r)&&this.lt(e)},u.prototype.lte_tolerance=function(t,r){var e=i(t);return this.eq_tolerance(e,r)||this.lt(e)},u.prototype.gt_tolerance=function(t,r){var e=i(t);return!this.eq_tolerance(e,r)&&this.gt(e)},u.prototype.gte_tolerance=function(t,r){var e=i(t);return this.eq_tolerance(e,r)||this.gt(e)},u.prototype.pLog10=function(){return this.lt(u.dZero)?u.dZero:this.log10()},u.prototype.absLog10=function(){return 0===this.sign?u.dNaN:this.layer>0?e(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):e(1,0,Math.log10(this.mag))},u.prototype.log10=function(){return this.sign<=0?u.dNaN:this.layer>0?e(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):e(this.sign,0,Math.log10(this.mag))},u.prototype.log=function(t){return t=i(t),this.sign<=0||t.sign<=0||1===t.sign&&0===t.layer&&1===t.mag?u.dNaN:0===this.layer&&0===t.layer?e(this.sign,0,Math.log(this.mag)/Math.log(t.mag)):u.div(this.log10(),t.log10())},u.prototype.log2=function(){return this.sign<=0?u.dNaN:0===this.layer?e(this.sign,0,Math.log2(this.mag)):1===this.layer?e(Math.sign(this.mag),0,3.321928094887362*Math.abs(this.mag)):2===this.layer?e(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):e(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))},u.prototype.ln=function(){return this.sign<=0?u.dNaN:0===this.layer?e(this.sign,0,Math.log(this.mag)):1===this.layer?e(Math.sign(this.mag),0,2.302585092994046*Math.abs(this.mag)):2===this.layer?e(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):e(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))},u.prototype.logarithm=function(t){return this.log(t)},u.prototype.pow=function(t){var r=this,e=i(t);if(0===r.sign)return r;if(1===r.sign&&0===r.layer&&1===r.mag)return r;if(0===e.sign)return n(1,0,1);if(1===e.sign&&0===e.layer&&1===e.mag)return r;var a=r.absLog10().mul(e).pow10();return-1===this.sign&&e.toNumber()%2==1?a.neg():a},u.prototype.pow10=function(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return u.dNaN;var t=this;if(0===t.layer){var r=Math.pow(10,t.sign*t.mag);if(Number.isFinite(r)&&Math.abs(r)>.1)return e(1,0,r);if(0===t.sign)return u.dOne;t=n(t.sign,t.layer+1,Math.log10(t.mag))}return t.sign>0&&t.mag>0?e(t.sign,t.layer+1,t.mag):t.sign<0&&t.mag>0?e(-t.sign,t.layer+1,-t.mag):u.dOne},u.prototype.pow_base=function(t){return i(t).pow(this)},u.prototype.root=function(t){var r=i(t);return this.pow(r.recip())},u.prototype.factorial=function(){return this.mag<0?this.toNumber().add(1).gamma():0===this.layer?this.add(1).gamma():1===this.layer?u.exp(u.mul(this,u.ln(this).sub(1))):u.exp(this)},u.prototype.gamma=function(){if(this.mag<0)return this.recip();if(0===this.layer){if(this.lt(n(1,0,24)))return i(function(t){if(!isFinite(t))return t;if(t<-50)return t===Math.trunc(t)?Number.NEGATIVE_INFINITY:0;for(var r=1;t<10;)r*=t,++t;var i=.9189385332046727;i+=(.5+(t-=1))*Math.log(t),i-=t;var e=t*t,n=t;return i+=1/(12*n),i+=1/(360*(n*=e)),i+=1/(1260*(n*=e)),i+=1/(1680*(n*=e)),i+=1/(1188*(n*=e)),i+=691/(360360*(n*=e)),i+=7/(1092*(n*=e)),i+=3617/(122400*(n*=e)),Math.exp(i)/r}(this.sign*this.mag));var t=this.mag-1,r=.9189385332046727;r+=(t+.5)*Math.log(t);var e=t*t,a=t,s=12*a,o=1/s,h=(r-=t)+o;if(h===r)return u.exp(r);if((h=(r=h)-(o=1/(s=360*(a*=e))))===r)return u.exp(r);r=h;var g=1/(s=1260*(a*=e));return r+=g,r-=g=1/(s=1680*(a*=e)),u.exp(r)}return 1===this.layer?u.exp(u.mul(this,u.ln(this).sub(1))):u.exp(this)},u.prototype.lngamma=function(){return this.gamma().ln()},u.prototype.exp=function(){return this.mag<0?u.dOne:0===this.layer&&this.mag<=709.7?i(Math.exp(this.sign*this.mag)):0===this.layer?e(1,1,this.sign*Math.log10(Math.E)*this.mag):1===this.layer?e(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):e(1,this.layer+1,this.sign*this.mag)},u.prototype.sqr=function(){return this.pow(2)},u.prototype.sqrt=function(){if(0===this.layer)return i(Math.sqrt(this.sign*this.mag));if(1===this.layer)return e(1,2,Math.log10(this.mag)-.3010299956639812);var t=u.div(n(this.sign,this.layer-1,this.mag),n(1,0,2));return t.layer+=1,t.normalize(),t},u.prototype.cube=function(){return this.pow(3)},u.prototype.cbrt=function(){return this.pow(1/3)},u.prototype.tetrate=function(t=2,r=n(1,0,1)){if(t===Number.POSITIVE_INFINITY){var e=u.ln(this).neg();return e.lambertw().div(e)}if(t<0)return u.iteratedlog(r,this,-t);r=i(r);var a=t-(t=Math.trunc(t));0!==a&&(r.eq(u.dOne)?(++t,r=new u(a)):r=this.eq(10)?r.layeradd10(a):r.layeradd(a,this));for(var s=0;s<t;++s){if(r=this.pow(r),!isFinite(r.layer)||!isFinite(r.mag))return r;if(r.layer-this.layer>3)return n(r.sign,r.layer+(t-s-1),r.mag);if(s>100)return r}return r},u.prototype.iteratedexp=function(t=2,r=n(1,0,1)){return this.tetrate(t,r)},u.prototype.iteratedlog=function(t=10,r=1){if(r<0)return u.tetrate(t,-r,this);t=i(t);var e=i(this),n=r-(r=Math.trunc(r));if(e.layer-t.layer>3){var a=Math.min(r,e.layer-t.layer-3);r-=a,e.layer-=a}for(var s=0;s<r;++s){if(e=e.log(t),!isFinite(e.layer)||!isFinite(e.mag))return e;if(s>100)return e}return n>0&&n<1&&(e=t.eq(10)?e.layeradd10(-n):e.layeradd(-n,t)),e},u.prototype.slog=function(t=10){if(this.mag<0)return u.dNegOne;t=i(t);var r=0,e=i(this);if(e.layer-t.layer>3){var n=e.layer-t.layer-3;r+=n,e.layer-=n}for(var a=0;a<100;++a)if(e.lt(u.dZero))e=u.pow(t,e),r-=1;else{if(e.lte(u.dOne))return i(r+e.toNumber()-1);r+=1,e=u.log(e,t)}return i(r)},u.prototype.layeradd10=function(t){t=u.fromValue_noAlloc(t).toNumber();var r,e=i(this);t>=1&&(t-=r=Math.trunc(t),e.layer+=r);if(t<=-1&&(t-=r=Math.trunc(t),e.layer+=r,e.layer<0))for(var n=0;n<100;++n){if(e.layer++,e.mag=Math.log10(e.mag),!isFinite(e.mag))return e;if(e.layer>=0)break}if(t>0){for(var a=0;Number.isFinite(e.mag)&&e.mag<10;)e.mag=Math.pow(10,e.mag),++a;for(e.mag>1e10&&(e.mag=Math.log10(e.mag),e.layer++),(s=Math.log10(Math.log(1e10)/Math.log(e.mag),10))<t&&(e.mag=Math.log10(1e10),e.layer++,t-=s),e.mag=Math.pow(e.mag,Math.pow(10,t));a>0;)e.mag=Math.log10(e.mag),--a}else if(t<0){for(a=0;Number.isFinite(e.mag)&&e.mag<10;)e.mag=Math.pow(10,e.mag),++a;var s;for(e.mag>1e10&&(e.mag=Math.log10(e.mag),e.layer++),(s=Math.log10(1/Math.log10(e.mag)))>t&&(e.mag=1e10,e.layer--,t-=s),e.mag=Math.pow(e.mag,Math.pow(10,t));a>0;)e.mag=Math.log10(e.mag),--a}for(;e.layer<0;)e.layer++,e.mag=Math.log10(e.mag);return e.normalize(),e},u.prototype.layeradd=function(t,r){var i=this.slog(r).toNumber()+t;return i>=0?u.tetrate(r,i):Number.isFinite(i)?i>=-1?u.log(u.tetrate(r,i+1),r):void u.log(u.log(u.tetrate(r,i+2),r),r):u.dNaN},u.prototype.lambertw=function(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");return this.mag<0?i(h(this.toNumber())):0===this.layer?i(h(this.sign*this.mag)):1===this.layer||2===this.layer?g(this):this.layer>=3?n(this.sign,this.layer-1,this.mag):void 0};var g=function(t,r=1e-10){var i,e,n,a;if(!Number.isFinite(t.mag))return t;if(0===t)return t;if(1===t)return o;u.abs(t);i=u.ln(t);for(var s=0;s<100;++s){if(e=u.exp(-i),n=i.sub(t.mul(e)),a=i.sub(n.div(i.add(1).sub(i.add(2).mul(n).div(u.mul(2,i).add(2))))),u.abs(a.sub(i)).lt(u.abs(a).mul(r)))return a;i=a}throw Error("Iteration failed to converge: "+t)};return u.prototype.ssqrt=function(){if(1==this.sign&&this.layer>=3)return n(this.sign,this.layer-1,this.mag);var t=this.ln();return t.div(t.lambertw())},u.prototype.pentate=function(t=2,r=n(1,0,1)){r=i(r);var e=t-(t=Math.trunc(t));0!==e&&(r.eq(u.dOne)?(++t,r=new u(e)):r=this.eq(10)?r.layeradd10(e):r.layeradd(e,this));for(var a=0;a<t;++a){if(r=this.tetrate(r),!isFinite(r.layer)||!isFinite(r.mag))return r;if(a>10)return r}return r},u.prototype.sin=function(){return this.mag<0?this:0===this.layer?i(Math.sin(this.sign*this.mag)):n(0,0,0)},u.prototype.cos=function(){return this.mag<0?u.dOne:0===this.layer?i(Math.cos(this.sign*this.mag)):n(0,0,0)},u.prototype.tan=function(){return this.mag<0?this:0===this.layer?i(Math.tan(this.sign*this.mag)):n(0,0,0)},u.prototype.asin=function(){return this.mag<0?this:0===this.layer?i(Math.asin(this.sign*this.mag)):n(Number.NaN,Number.NaN,Number.NaN)},u.prototype.acos=function(){return this.mag<0?i(Math.acos(this.toNumber())):0===this.layer?i(Math.acos(this.sign*this.mag)):n(Number.NaN,Number.NaN,Number.NaN)},u.prototype.atan=function(){return this.mag<0?this:0===this.layer?i(Math.atan(this.sign*this.mag)):i(Math.atan(Infinity*this.sign))},u.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},u.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},u.prototype.tanh=function(){return this.sinh().div(this.cosh())},u.prototype.asinh=function(){return u.ln(this.add(this.sqr().add(1).sqrt()))},u.prototype.acosh=function(){return u.ln(this.add(this.sqr().sub(1).sqrt()))},u.prototype.atanh=function(){return this.abs().gte(1)?n(Number.NaN,Number.NaN,Number.NaN):u.ln(this.add(1).div(i(1).sub(this))).div(2)},u.prototype.ascensionPenalty=function(t){return 0===t?this:this.root(u.pow(10,t))},u.prototype.egg=function(){return this.add(9)},u.prototype.lessThanOrEqualTo=function(t){return this.cmp(t)<1},u.prototype.lessThan=function(t){return this.cmp(t)<0},u.prototype.greaterThanOrEqualTo=function(t){return this.cmp(t)>-1},u.prototype.greaterThan=function(t){return this.cmp(t)>0},u}();return u.dZero=n(0,0,0),u.dOne=n(1,0,1),u.dNegOne=n(-1,0,1),u.dTwo=n(1,0,2),u.dTen=n(1,0,10),u.dNaN=n(Number.NaN,Number.NaN,Number.NaN),u.dInf=n(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),u.dNegInf=n(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),u.dNumberMax=e(1,0,Number.MAX_VALUE),u.dNumberMin=e(1,0,Number.MIN_VALUE),u});